{"version":3,"sources":["storms-wc-mini-cart.min.js"],"names":["jQuery","$","storms_vars","$body","on","event","preventDefault","$cart_container","this","closest","$dropdown","hasClass","removeClass","addClass","target","length","$el","attr","item_key","block","message","overlayCSS","background","opacity","post","wc_ajax_url","toString","replace","cart_item_key","response","fragments","document","body","trigger","cart_hash","window","location","fail"],"mappings":"AAIAA,OAAQ,SAAUC,GAGjB,GAA4B,oBAAhBC,YACX,OAAO,EAGR,IAAIC,EAAQF,EAAG,QAEfE,EAAMC,GAAI,QAAS,oCAAqC,SAAWC,GAElEA,EAAMC,iBAEA,IAAIC,EAAkBN,EAAEO,MAAMC,QAAQ,yBAClCC,EAAYT,EAAE,0BAA2BM,GACvCG,EAAUC,SAAS,UAG9BD,EAAUE,YAAY,UAFtBF,EAAUG,SAAS,YAOrBV,EAAMC,GAAI,QAAS,SAAUC,GAENJ,EAAEI,EAAMS,QAAQL,QAAQ,yBACxBM,QAELd,EAAE,wDAERW,YAAY,YAOxBT,EAAMC,GAAI,QAAS,wDAAyD,SAAUC,GAC/EA,EAAMC,iBAENU,IAAMf,EAAGO,MACQQ,IAAIC,KAAK,mBAA1B,IACIC,EAAWF,IAAIC,KAAK,iBACVD,IAAIC,KAAK,gBAEFhB,EAAE,2BACRkB,MAAM,CACjBC,QAAS,KACTC,WAAY,CACRC,WAAY,OACZC,QAAS,MAMvBtB,EAAEuB,KAAMtB,YAAYuB,YAAYC,WAAWC,QAAS,eAAgB,oBAAsB,CAAEC,cAAgBV,GAAY,SAAUW,GAC1HA,GAAcA,EAASC,UAI9B7B,EAAG8B,SAASC,MAAOC,QAAS,oBAAqB,CAAEJ,EAASC,UAAWD,EAASK,YAH/EC,OAAOC,SAAWpB,IAAIC,KAAM,UAI3BoB,KAAM,WACRF,OAAOC,SAAWpB,IAAIC,KAAM","file":"../storms-wc-mini-cart.min.js","sourcesContent":["/**\n * Open/close the wc cart mini products list - and keep it opened unless you click outside the element\n */\n/* global storms_vars */\njQuery( function( $ ) {\n\n\t// storms_vars is required to continue, ensure the object exists\n\tif ( typeof storms_vars === 'undefined' ) {\n\t\treturn false;\n\t}\n\n\tvar $body = $( 'body' );\n\n\t$body.on( 'click', '.storms-cart-contents a.cart-link', function ( event ) {\n\n\t\tevent.preventDefault();\n\n        var $cart_container = $(this).closest('.storms-cart-contents');\n        var $dropdown = $('.shopping_cart_dropdown', $cart_container);\n        if( ! $dropdown.hasClass('active') ) {\n\t\t\t$dropdown.addClass('active');\n        } else {\n\t\t\t$dropdown.removeClass('active');\n        }\n\n    } );\n\n\t$body.on( 'click', function( event ) {\n\n\t\tvar $cart_container = $(event.target).closest('.storms-cart-contents');\n\t\tif( ! $cart_container.length ) {\n\t\t\t// The click was outside the Mini Cart...\n\t\t\tvar $dropdown = $('.storms-cart-contents .shopping_cart_dropdown.active');\n\t\t\t// The Mini Cart was open, so we going to close it\n\t\t\t$dropdown.removeClass('active');\n\t\t}\n\n\t} );\n\n\t// Replacement for WC original \"Remove Item\" function\n    // @see wp-content/plugins/woocommerce/assets/js/frontend/add-to-cart.js:L71\n\t$body.on( 'click', '.storms-cart-contents .storms_remove_from_cart_button', function( event ) {\n        event.preventDefault();\n\n        $el = $( this );\n        var product_id = $el.attr('data-product_id');\n        var item_key = $el.attr('data-item_key');\n        var wpnonce = $el.attr('data-wpnonce');\n\n        var $cart_dropdown = $('.shopping_cart_dropdown');\n        $cart_dropdown.block({\n            message: null,\n            overlayCSS: {\n                background: '#fff',\n                opacity: 0.6\n            }\n        });\n\n\t\t// Modificamos a fun√ßao original do WC para controlar melhor o 'block' na tela\n\t\t// @see wp-content/plugins/woocommerce/assets/js/frontend/add-to-cart.js:71\n\t\t$.post( storms_vars.wc_ajax_url.toString().replace( '%%endpoint%%', 'remove_from_cart' ), { cart_item_key : item_key }, function( response ) {\n\t\t\tif ( ! response || ! response.fragments ) {\n\t\t\t\twindow.location = $el.attr( 'href' );\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t$( document.body ).trigger( 'removed_from_cart', [ response.fragments, response.cart_hash ] );\n\t\t}).fail( function() {\n\t\t\twindow.location = $el.attr( 'href' );\n\t\t\treturn;\n\t\t});\n    } );\n\n} );\n"]}